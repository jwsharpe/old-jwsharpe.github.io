<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Blog?</title>

    <link rel="stylesheet" href="../blog.css" />
    <link rel="stylesheet" href="../prism/prism.css" />
    <script src="../prism/prism.js" defer></script>
    <link
      href="https://fonts.googleapis.com/css?family=Nanum+Myeongjo:400,700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div id="header">
      <a href="" id="head-avatar">
        <img
          src="https://avatars3.githubusercontent.com/u/23224124?s=400&amp;u=73bf2cd89e55115ada860b5d3d93f11b77de0265&amp;v=4"
      /></a>
      <div id="head-content">
        <h1><a href="../posts.html" id="head-name">James Wright Sharpe</a></h1>
        <h2 id="head-description">Mathematician and Software Engineer</h2>
      </div>
    </div>

    <div id="blog-body">
      <h2 id="titleusingcollectionselectinrubyonrails">
        Using Collection Select in Ruby on Rails
      </h2>
      <p>TLDR;</p>
      <pre><code class="rb language-rb">collection_select(:post, :author_id, Author.all, :id, :name)</code></pre>
      <h2 id="howto">How to</h2>
      <p>
        Assume we have a relationship between a single author having many posts.
        Our post model should contain the following attributes:
      </p>
      <pre><code class='rb language-ruby'>Post#id
Post#title
Post#message
Post#author_id</code></pre>
      <p>Likewise, our Author Model should contain the following attributes:</p>
      <pre><code class='rb language-ruby'>Author#id
Author#name</code></pre>
      <p>
        We then want to build a drop down menu that will give us the the id of
        the author that the user selects, and in order to follow convention we
        also want to save that to the parameters. If we want to access our
        <code class="rb language-ruby">Author#id</code> in
        <code class="rb language-rb">params[:post[:author_id]]</code> we write,
      </p>
      <pre><code class="rb language-ruby">collection_select(:post,:author_id,...)</code></pre>
      <p>
        We then want to pass to all of the items that collection_select will
        display.
      </p>
      <pre><code class="rb language-rb">collection_select(:post,:author_id,Author.all,...)</code></pre>
      <p>
        The next argument it takes is the value we want to return. Since we are
        expecting
        <code class="rb language-rb">params[:post][:author_id]</code> we want to
        pass in <code class="rb language-rb">Author#id</code>. So we pass in the
        method of an instance of <code class="rb language-rb">Author</code>.
      </p>
      <pre><code class="rb language-rb">collection_select(:post,:author_id,Author.all,:id,...)</code></pre>
      <p>
        Finally we pass in the value that we want to end user to see it as in
        the drop down box. In our case we will use
        <code class="rb language-rb">Author#name</code>.
      </p>
      <pre><code class="rb language-rb">collection_select(:post,:author_id,Author.all,:id,:name)</code></pre>
      <p>
        This method can be visualized easier in the follow graph.
        <img src="../images/03/graphic.png" alt="image" />
      </p>
      <p>
        And if you have any questions for me, feel free to shoot me an email
        below.
      </p>
      <p>Thanks for reading!</p>
    </div>
    <div id="footer">
      <p>
        jameswrightsharpe@gmail.com || github.com/jwsharpe
      </p>
    </div>
  </body>
</html>
